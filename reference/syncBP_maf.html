<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="The NF-OSI workflow produces a single merged maf file that represents a filtered subset of the mafs,
containing only the (non-germline) data that can be released for cBioPortal.
However, this data file by itself is not immediately loadable into an instance of a cBioPortal server
and needs to be packaged with other files, such as this
example of a public mutations dataset.
This is a wrapper that goes through several steps needed to create said bundle of cBioPortal files more conveniently."><title>Make cBioPortal mutations dataset from Synapse assets — syncBP_maf • nfportalutils</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Make cBioPortal mutations dataset from Synapse assets — syncBP_maf"><meta property="og:description" content="The NF-OSI workflow produces a single merged maf file that represents a filtered subset of the mafs,
containing only the (non-germline) data that can be released for cBioPortal.
However, this data file by itself is not immediately loadable into an instance of a cBioPortal server
and needs to be packaged with other files, such as this
example of a public mutations dataset.
This is a wrapper that goes through several steps needed to create said bundle of cBioPortal files more conveniently."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">nfportalutils</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9320</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/annotate-nf-processed-data.html">Annotating nextflow processed data</a>
    <a class="dropdown-item" href="../articles/bringing-portal-data-to-other-platforms-cbioportal.html">Bringing Portal Data to Other Platforms (cBioPortal)</a>
    <a class="dropdown-item" href="../articles/survey-public-files.html">Surveying public files in the portal</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/nf-osi/nfportalutils/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Make cBioPortal mutations dataset from Synapse assets</h1>
      <small class="dont-index">Source: <a href="https://github.com/nf-osi/nfportalutils/blob/HEAD/R/syncBP.R" class="external-link"><code>R/syncBP.R</code></a></small>
      <div class="d-none name"><code>syncBP_maf.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The NF-OSI workflow produces a single merged maf file that represents a filtered subset of the <code>maf</code>s,
containing only the (non-germline) data that <em>can</em> be released for cBioPortal.
However, this data file by itself is not immediately loadable into an instance of a cBioPortal server
and needs to be packaged with other files, such as this
<a href="https://github.com/cBioPortal/datahub/tree/1e03ea6ab5e0ddd497ecf349cbee7d50aeebcd5e/public/msk_ch_2020" class="external-link">example of a public mutations dataset</a>.
This is a wrapper that goes through several steps needed to create said bundle of cBioPortal files more conveniently.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">syncBP_maf</span><span class="op">(</span></span>
<span>  <span class="va">merged_maf</span>,</span>
<span>  <span class="va">samplesheet</span>,</span>
<span>  <span class="va">ref_map</span>,</span>
<span>  <span class="va">ref_view</span>,</span>
<span>  <span class="va">name</span>,</span>
<span>  <span class="va">cancer_study_identifier</span>,</span>
<span>  citation <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  pmid <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  short_name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  publish_dir <span class="op">=</span> <span class="va">cancer_study_identifier</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>merged_maf</dt>
<dd><p>Synapse id of <code>merged maf</code> file for public release.</p></dd>


<dt>samplesheet</dt>
<dd><p>Synapse id or local path to samplesheet with release info.</p></dd>


<dt>ref_map</dt>
<dd><p>YAML file specifying the mapping of (NF) clinical metadata to cBioPortal model. See details.</p></dd>


<dt>ref_view</dt>
<dd><p>A view that contains clinical data for the release files.</p></dd>


<dt>name</dt>
<dd><p>Name of the cancer study, e.g. something following convention is "Malignant Peripheral Nerve Sheath Tumor (NF-OSI, 2022)".</p></dd>


<dt>cancer_study_identifier</dt>
<dd><p>Study identifier, convention is <code>{tumorType}_{institution}_{year}</code>, so for example "mpnst_nfosi_2022".</p></dd>


<dt>citation</dt>
<dd><p>(Optional) A relevant citation, e.g. "TCGA, Nature 2012".</p></dd>


<dt>pmid</dt>
<dd><p>(Optional) One or more relevant pubmed ids (comma separated without whitespace); if used, citation cannot be <code>NULL</code>.</p></dd>


<dt>short_name</dt>
<dd><p>(Optional) Short name for the study.</p></dd>


<dt>publish_dir</dt>
<dd><p>Where to output the set of files.
Defaults to (creating if necessary) a folder with same name as <code>cancer_study_identifier</code>.</p></dd>


<dt>verbose</dt>
<dd><p>Whether to provide informative messages throughout.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    
<ol><li><p>A simple sanity check that this is the version of the maf release file that we want, based on the samplesheet.
For example, version 1 of the samplesheet will generate a version 1 of the merged maf,
but if there is a later correction that retracts a sample (<code>is_releasable</code>=FALSE),
that step of the workflow to generate merged maf will be rerun (or it should be), so we'll want to make sure the latest versions of these files are used.
The latest versions of the samplesheets tied to each release are currently stored in <code>syn38793855</code>.
(Note: Please file issue to update this doc if this changes.)</p></li>
<li><p>Make the clinical data files.
For NF, the clinical metadata are annotations on the files/surfaced in a view and are pretty basic.
In the future, it would be preferable to store clinical metadata in a real normalized table.
For now, this clinical data is pulled in from the view. To map NF clinical variables to the
<a href="https://github.com/cBioPortal/clinical-data-dictionary/blob/e9ec08f48bd57aabf193da70cdb5b88bdef5d01d/docs/resource_uri_to_clinical_attribute_mapping.txt" class="external-link">cBioPortal dictionary</a>
<a href="https://docs.cbioportal.org/file-formats/#custom-columns-in-clinical-data" class="external-link">as recommended</a>,
this step requires a <code>ref_map</code>, which is a YAML file.</p></li>
<li><p>Make meta files. Meta files are needed for describing the study, mutations data file, clinical data files.</p></li>
</ol></div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Robert Allaway, Anh Nguyet Vu.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

